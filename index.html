
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <title>Galeria de Bonsais</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }
        h1 {
            color: darkgreen;
        }
        select, input[type="text"] {
            margin-top: 10px;
            padding: 5px;
        }
        #log {
            margin-top: 20px;
            color: red;
            white-space: pre-wrap;
        }
        .galeria {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }
        .imagem-container {
            text-align: center;
        }
        .imagem-container img {
            max-width: 200px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Galeria de Bonsais</h1>
    <label for="categoria">Categoria:</label>
    <select id="categoria">
        <option>Selecionar categoria</option>
    </select>

    <label for="especie">Espécie:</label>
    <input type="text" id="pesquisarEspecie" placeholder="Pesquisar espécie..." />
    <select id="especie">
        <option>Selecionar espécie</option>
    </select>

    <label for="estilo">Estilo:</label>
    <select id="estilo">
        <option>Todos</option>
    </select>

    <div id="galeria" class="galeria"></div>
    <div id="log">logs (v2.06g):</div>

    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            const log = document.getElementById("log");
            function registrar(msg) {
                console.log(msg);
                log.innerText += "\n" + msg;
            }

            registrar("JS carregado e DOM pronto.");

            const categorias = ["Coniferas", "Caducifolias", "Perenifolias", "Frutiferas"];
            const especiesPorCategoria = {
                "Coniferas": ["Pinus sylvestris"],
                "Caducifolias": ["Acer palmatum"],
                "Perenifolias": ["Ficus retusa"],
                "Frutiferas": ["Malus domestica"]
            };
            const imagensPorEspecie = {
                "Pinus sylvestris": [
                    "https://bonsaiempire.com/images/tree-species/pine/pinus-sylvestris.jpg"
                ],
                "Acer palmatum": [
                    "https://bonsaiempire.com/images/tree-species/maple/japanese-maple.jpg"
                ],
                "Ficus retusa": [
                    "https://bonsaiempire.com/images/tree-species/ficus/ficus-retusa.jpg"
                ],
                "Malus domestica": [
                    "https://bonsaiempire.com/images/tree-species/apple/apple-bonsai.jpg"
                ]
            };
            const estilosPorEspecie = {
                "Pinus sylvestris": "Informal",
                "Acer palmatum": "Chokan",
                "Ficus retusa": "Moyogi",
                "Malus domestica": "Shakan"
            };

            const selCategoria = document.getElementById("categoria");
            const selEspecie = document.getElementById("especie");
            const selEstilo = document.getElementById("estilo");
            const galeria = document.getElementById("galeria");

            function preencherDropdown(dropdown, opcoes, defaultText) {
                dropdown.innerHTML = `<option>${defaultText}</option>`;
                opcoes.forEach(op => {
                    const opt = document.createElement("option");
                    opt.textContent = op;
                    dropdown.appendChild(opt);
                });
            }

            function mostrarImagens(especie) {
                galeria.innerHTML = "";
                const imagens = imagensPorEspecie[especie] || [];
                imagens.forEach((src, idx) => {
                    const div = document.createElement("div");
                    div.className = "imagem-container";
                    div.innerHTML = `<img src="${src}" alt="${especie}" /><div>#${idx + 1}<br>${especie} (${estilosPorEspecie[especie]})</div>`;
                    galeria.appendChild(div);
                });
            }

            preencherDropdown(selCategoria, categorias, "Selecionar categoria");

            selCategoria.addEventListener("change", function () {
                const cat = this.value;
                if (especiesPorCategoria[cat]) {
                    preencherDropdown(selEspecie, especiesPorCategoria[cat], "Selecionar espécie");
                    registrar(`Categoria selecionada: ${cat}`);
                    galeria.innerHTML = "";
                }
            });

            selEspecie.addEventListener("change", function () {
                const esp = this.value;
                if (esp && imagensPorEspecie[esp]) {
                    mostrarImagens(esp);
                    registrar(`Espécie selecionada: ${esp}`);
                }
            });

            registrar("Inicialização completa.");
        });
    </script>
</body>
</html>
