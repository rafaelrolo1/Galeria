<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="utf-8"/>
<title>Galeria de Bonsais</title>
<style>
    body { font-family: sans-serif; padding: 20px; }
    h1 { color: darkgreen; }
    select { margin: 10px; padding: 5px; }
    #log { margin-top: 20px; color: red; white-space: pre-wrap; }
    .galeria { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
    .galeria div { text-align: center; }
    .galeria img { width: 200px; height: auto; border-radius: 10px; }
    select.auto-selected { background-color: #d1fadf; border-color: green; }
    .fullscreen-img {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: contain;
      background-color: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      display: none;
      cursor: zoom-out;
    }
    .dark {
      background-color: #111;
      color: #eee;
    }
    .dark select, .dark input {
      background-color: #333;
      color: #eee;
    }
    .dark .galeria div {
      background-color: #222;
    }
</style>
</head>
<body>
<h1>Galeria de Bonsais</h1>
<label>Categoria:
  <select id="categoriaSelect"><option value="">Selecionar categoria</option></select>
</label>
<label>Espécie:
  <input id="searchEspecie" placeholder="Pesquisar espécie..." style="margin-left:10px; padding:5px;" type="text"/>
  <select id="especieSelect"><option value="">Selecionar espécie</option></select>
</label>
<label>Estilo:
  <select id="estiloSelect"><option value="">Todos</option></select>
</label>
<div class="galeria" id="galeria"></div>
<div id="log">logs (v2.08 corrigido):</div>
<script>
  const apiKey = "AIzaSyAwYMSAn6yrut3thb5c0hrHONWnLTI1OWM";
  const sheetId = "1VszHZn6YCPHGMhNzetQMpozbxxqK6KC1U9SNb_BzK7I";

  const categoriaSelect = document.getElementById("categoriaSelect");

  async function fetchSheetRange(sheet, range) {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${sheet}!${range}?key=${apiKey}`;
    const response = await fetch(url);
    const data = await response.json();
    return data.values || [];
  }

  async function carregarCategorias() {
    const categorias = await fetchSheetRange("Categoria", "A1:A100");
    categoriaSelect.innerHTML = '<option value="">Selecionar categoria</option>';
    categorias.forEach(([cat]) => {
      const opt = document.createElement("option");
      opt.value = cat;
      opt.textContent = cat;
      categoriaSelect.appendChild(opt);
    });
  }

  document.addEventListener("DOMContentLoaded", carregarCategorias);
</script>
</body>
</html>
